
 <script type="text/javascript">

  var chartDataSource = [
    { category: "A favor", value: <%= @count_afavor %> },
    { category: "Contra", value: <%= @count_contra %> },
    { category: "Abstenção", value: <%= @count_abstencao %> },
    { category: "Obstrução", value: <%= @count_obstrucao %> },
  ];

  $(function () {
    $("#graficoDeputado").dxPieChart(
    {
      dataSource: chartDataSource,
      series: {
        argumentField: "category",
        valueField: "value"
      },

      tooltip: {
        enabled: true,
        percentPrecision: 2,
        customizeText: function (value) {
          return value.percentText
        }
      },

      legend: {
        horizontalAlignment: "right",
        verticalAlignment: "top"
      },

    }
    );
  })
</script>

<h2> Votações com <%= @deputado.nome %></h1>
<h3> Partido: <%= @deputado.partido %></h3>
<h3> UF: <%= @deputado.uf %></h3>

</br>

<% @votos_dep.each do |v| %>
	<div id="modal<%= v.id %>" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-header">
			<h3><%= v.votacao.proposicao.to_s %></h3>
		</div>
		<div class="modal-body">
			<p>Autor: <%= v.votacao.proposicao.autor_nome %> / <%= v.votacao.proposicao.autor_uf %></p>
			<p>Partido: <%= v.votacao.proposicao.autor_partido %></p>
			<p>Ementa: <%= v.votacao.proposicao.ementa %></p>
			<p> <%= v.votacao.proposicao.ementa_explicacao %></p>
		</div>
		<div class="modal-footer">
			<button class="btn" data-dismiss="modal" aria-hidden="true">Fechar</button>
		</div>
	</div>
<% end %>

<table class='table table-striped table-condensed'>
  <tr>
    <th>Votação</th>
    <th>A favor</th>
    <th>Contra</th>
    <th>Abstenção</th>
    <th>Obstrução</th>

  </tr>
  <% @votos_dep.each do |v| %>
	<tr>
  	  <td><a href="#modal<%= v.id %>" data-toggle="modal"><%= v.votacao.proposicao.to_s %></a></td>
  	  <td><strong><p class="text-success"><%= "X" if v.voto == 2 %></p></strong></td>
  	  <td><strong><p class="text-danger"><%= "X" if v.voto == -2 %></p></strong></td>
  	  <td><strong><p class="text-warning"><%= "X" if v.voto == -1 %></p></strong></td>
  	  <td><strong><p class="text-muted"><%= "X" if v.voto == 0 %></p></strong></td>
   </tr>
  <% end %>

	<tr>
  	  <td>Número de PLS: <%= @count_pls %></td>
  	  <td><%= @count_afavor %></td>
  	  <td><%= @count_contra %></td>
  	  <td><%= @count_abstencao %></td>
  	  <td><%= @count_obstrucao %></td>
   </tr>

</table>

<br/><br/>
<h2> Vizualização </h2>

    <body>
      <div id="graficoDeputado" style="max-width:700px;height: 300px;"></div>
    </body>